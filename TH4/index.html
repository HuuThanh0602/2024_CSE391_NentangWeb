<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Ứng dụng quản lý sinh viên</title>
    <style>
        /* CSS cơ bản cho giao diện */
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #ddd; padding: 8px; }
        input[type=text], input[type=date] { width: 100%; padding: 8px; }
        button { padding: 8px 16px; background-color: #4CAF50; color: white; border: none; }
    </style>
</head>
<body>

<h2>Thêm sinh viên</h2>
<form id="formSinhVien">
    Họ tên: <input type="text" id="hoTen"><br><br>
    Mã SV: <input type="text" id="maSV"><br><br>
    Ngày sinh: <input type="date" id="ngaySinh"><br><br>
    Lớp: <input type="text" id="lop"><br><br>
    <button type="submit">Thêm</button>
</form>

<h2>Danh sách sinh viên</h2>
<table id="bangSinhVien">
    <tr>
        <th>Họ tên</th>
        <th>Mã SV</th>
        <th>Ngày sinh</th>
        <th>Lớp</th>
        <th>Hành động</th>
    </tr>
</table>

<script>
    document.getElementById("formSinhVien").addEventListener("submit", function(event) {
        event.preventDefault(); // Ngăn chặn form submit mặc định

        // Lấy dữ liệu từ form
        var hoten = document.getElementById("hoTen").value;
        var masv = document.getElementById("maSV").value;
        var ngaysinh = document.getElementById("ngaySinh").value;
        var lop = document.getElementById("lop").value;

        // Validate dữ liệu
        if (!hoten || !masv || !ngaysinh || !lop) {
            alert("Vui lòng điền đầy đủ thông tin");
            return;
        }

        // Tạo một đối tượng sinh viên mới
        var sinhvien = {hoten, masv, ngaysinh, lop};

        // Thêm sinh viên vào bảng
        themSinhVienVaoBang(sinhvien);

        // Lưu vào localStorage
        localStorage.setItem(masv, JSON.stringify(sinhvien));

        // Reset form
        document.getElementById("formSinhVien").reset();
    });

    function themSinhVienVaoBang(sinhvien) {
        var bangSinhVien = document.getElementById("bangSinhVien");
        var newRow = bangSinhVien.insertRow(-1); // chèn vào cuối hàng
        var cell1 = newRow.insertCell(0);
        var cell2 = newRow.insertCell(1);
        var cell3 = newRow.insertCell(2);
        var cell4 = newRow.insertCell(3);
        var cell5 = newRow.insertCell(4);
        
        // đổ dữ liệu vào hàng mới
        cell1.innerHTML = sinhvien.hoten;
        cell2.innerHTML = sinhvien.masv;
        cell3.innerHTML = sinhvien.ngaysinh;
        cell4.innerHTML = sinhvien.lop;
        cell5.innerHTML = '<button onclick="xoaSinhVien(this)">Xóa</button> <button onclick="suaSinhVien(this)">Sửa</button>';
    }

    function xoaSinhVien(button) {
        var row = button.parentNode.parentNode;
        var masv = row.cells[1].innerHTML; // Lấy mã sinh viên từ cột thứ hai của hàng
        localStorage.removeItem(masv);
        row.parentNode.removeChild(row);
    }

    function suaSinhVien(button) {
        var row = button.parentNode.parentNode;
        var masv = row.cells[1].innerHTML; // Lấy mã sinh viên từ cột thứ hai của hàng
        var sinhvien = JSON.parse(localStorage.getItem(masv));

        // Điền thông tin sinh viên lên form
        document.getElementById("hoTen").value = sinhvien.hoten;
        document.getElementById("maSV").value = sinhvien.masv;
        document.getElementById("ngaySinh").value = sinhvien.ngaysinh;
        document.getElementById("lop").value = sinhvien.lop;

        // Xóa sinh viên cũ khỏi bảng và localStorage
        // xoaSinhVien(button);
    }

    function hienThiDanhSachSinhVien() {
        for (var i = 0; i < localStorage.length; i++) {
            var masv = localStorage.key(i);
            var sinhvien = JSON.parse(localStorage.getItem(masv));
            themSinhVienVaoBang(sinhvien);
        }
    }

    hienThiDanhSachSinhVien();
</script>

</body>
</html>
